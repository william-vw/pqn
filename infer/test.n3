@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix dfg: <http://rdf.org/dfg#> .
@prefix : <http://example.org/> .

{   ?list list:flatten ?result } 
<= { ?list list:flattening ( () ?result ) } .

{   ?list list:flattening ( ?cur ?result ) } 
<= {
    ?list list:firstRest ( ?first ?rest ) .
    ( ?first ?cur ) list:append ?cur2 .

    ?rest list:flattening ( ?cur2 ?result )
} .

{   () list:flattening ( ?result ?result ) }
<= true .