@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix math: <http://www.w3.org/2000/10/swap/math#> .
@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix tr: <http://rdf.org/trace#> .
@prefix p2: <http://ocel2.org/p2p#> .

{   
    ?o a tr:Object .
    # ?o log:equalTo p2:purchase_requisition:0:pr_trigger_0 .

    (( ?e ?ts )
        { 
            [] tr:event ?e ; tr:object ?o .
            ?e tr:ts ?ts .
        }
    ?es) log:collectAllIn _:t .
    # "es" log:trace ?es .

    ?es list:sortOn ?sorted .
    # "sort" log:trace ?sorted .

    ?sorted list:iterate (?i ?e ) .
    ( ?i 1 ) math:sum ?j .
    ?sorted!list:length math:greaterThan ?j .
    ( ?sorted ?j ) list:memberAt ?e2 .

} => {
        [ 
            tr:object ?o ;
            tr:from ?e ; 
            tr:to ?e2 ;
        ]
} .