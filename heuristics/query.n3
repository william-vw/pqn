@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix dfg: <http://rdf.org/dfg#> .
@prefix : <http://example.org/> .

# test data:
# eye test.n3 / rules.n3 --turtle ./data/data1.n3 --query query.n3 --nope
# pilot medical:
# eye rules.n3 --turtle ./data/pilot_medical-normative.n3 --query query.n3 --nope

# { 
#     ?pt dfg:inNormative true .
#     ( ?pt dfg:normative ) dfg:decisionPoint true .

# } => { ?pt :found true } .

# { 
#     ( ?pt dfg:normative ) dfg:decisionPoint true .
#     ?pt dfg:inDiscovered false .

# } => { ?pt :found true } .

# { 
#     ( dfg:normative dfg:discovered ) log:equalTo ?srcs .
#     ?src list:in ?srcs . 

#     ( ?pt ?src ) dfg:decisionPoint true .
#     # only found in normative / discovered
#     ( { ( ?pt ?found ) dfg:decisionPoint true } { ?found log:equalTo ?src } ) log:forAllIn _:t .

# } => { ?pt dfg:dpOnlyIn ?src } .

# {
#     ( ( :c2 :a ) :c ) dfg:inChoiceBranch ?determ .
#     ( ?determ dfg:normative ) dfg:prior ?priors .

# } => {
#     <> :determ ?determ ; :priors ?priors .
# } .

{ ( ?pt ?d ) dfg:inferredDecisionFromFollowingEvent ?e } 
# => { ( ?pt ?d ) dfg:inferredDecisionFromFollowingEvent ?e } .
=> {
    [
        dfg:from ?pt ;
        dfg:to ?d ;
        dfg:source dfg:discovered ;
        dfg:inferred "inferredDecisionFromFollowingEvent"
    ]
} .

# { ( :a () ) dfg:collectBranchLinks ?links }
# =>
# { :a :branchLinks ?links } .

# { ( :k () ) dfg:collectBranchLinks ?links }
# =>
# { :k :branchLinks ?links } .


# { ( ?from ?to ) dfg:inferredEventFromKnownEvent ?known_e }
# => {
#     [
#         dfg:from ?from ;
#         dfg:to ?to ;
#         dfg:source dfg:discovered ;
#         dfg:inferred "inferredEventFromKnownEvent"
#     ]
# } .

{ ?pt dfg:inferredDecisionPointFromDecision ?d } 
# => { ?pt dfg:inferredDecisionPointFromDecision ?d } .
=> {
    [
        dfg:from ?pt ;
        dfg:to ?d ;
        dfg:source dfg:discovered ;
        dfg:inferred "inferredDecisionPointFromDecision"
    ]
} .